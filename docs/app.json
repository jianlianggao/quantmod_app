[{"name":"app.R","content":"library(shiny)\nlibrary(ggplot2)\n\nui <- fluidPage(\n  titlePanel(\"Stock Data Fetcher\"),\n  sidebarLayout(\n    sidebarPanel(\n      textInput(\"ticker\", \"Enter Ticker Symbol:\", value = \"AAPL\"),\n      actionButton(\"trigger\", \"Fetch Data\")\n    ),\n    mainPanel(\n      plotOutput(\"stock_plot\"),\n      textOutput(\"status\")\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  observeEvent(input$trigger, {\n    req(input$ticker)\n    token <- Sys.getenv(\"GITHUB_TOKEN\")\n    POST(\n      url = \"https://api.github.com/repos/yourusername/yourrepo/actions/workflows/deploy.yml/dispatches\",\n      add_headers(Authorization = paste(\"token\", token)),\n      body = list(ref = \"main\", inputs = list(ticker = input$ticker)),\n      encode = \"json\"\n    )\n    output$status <- renderText(\"Fetching data...\")\n  })\n  \n  observe({\n    invalidateLater(10000, session)  # Check every 10 seconds\n    ticker <- input$ticker\n    if (file.exists(paste0(ticker, \".csv\"))) {\n      data <- read.csv(paste0(ticker, \".csv\"))\n      output$stock_plot <- renderPlot({\n        ggplot(data, aes(x = index(data), y = data[, 4])) +  # Adjust column index as needed\n          geom_line() +\n          labs(title = paste(\"Stock Price for\", ticker), x = \"Date\", y = \"Price\")\n      })\n      output$status <- renderText(\"Data loaded successfully!\")\n    }\n  })\n}\n\nshinyApp(ui = ui, server = server)\n","type":"text"},{"name":"myapp.Rproj","content":"Version: 1.0\n\nRestoreWorkspace: Default\nSaveWorkspace: Default\nAlwaysSaveHistory: Default\n\nEnableCodeIndexing: Yes\nUseSpacesForTab: Yes\nNumSpacesForTab: 2\nEncoding: UTF-8\n\nRnwWeave: Sweave\nLaTeX: pdfLaTeX\n","type":"text"}]
